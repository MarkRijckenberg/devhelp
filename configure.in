AC_INIT(src/Makefile.am)

DEVHELP_VERSION=0.4.99

GLIB_REQUIRED=1.3.10
GTK_REQUIRED=1.3.10
GNOME_REQUIRED=1.105
GNOME_UI_REQUIRED=1.105
#GNOME_PRINT_REQUIRED=
GNOME_VFS_REQUIRED=1.9.4
LIBXML_REQUIRED=2.4.10
LIBGLADE_REQUIRED=1.99.4
LIBGTKHTML3_REQUIRED=3.0
ORBIT_REQUIRED=2.3.99
LIBIDL_REQUIRED=0.7.1
BONOBO_ACTIVATION_REQUIRED=0.9.3
LIBBONOBO_REQUIRED=1.107.0
LIBBONOBOUI_REQUIRED=1.107.0
GCONF_REQUIRED=1.1.5

AC_SUBST(GLIB_REQUIRED)
AC_SUBST(GTK_REQUIRED)
AC_SUBST(GNOME_REQUIRED)
AC_SUBST(GNOME_UI_REQUIRED)
#AC_SUBST(GNOME_PRINT_REQUIRED)
AC_SUBST(GNOME_VFS_REQUIRED)
AC_SUBST(LIBXML_REQUIRED)
AC_SUBST(LIBGLADE_REQUIRED)
AC_SUBST(LIBGTKHTML3_REQUIRED)
AC_SUBST(ORBIT_REQUIRED)
AC_SUBST(LIBIDL_REQUIRED)
AC_SUBST(BONOBO_ACTIVATION_REQUIRED)
AC_SUBST(LIBBONOBO_REQUIRED)
AC_SUBST(LIBUIBONOBO_REQUIRED)
AC_SUBST(GCONF_REQUIRED)

AM_INIT_AUTOMAKE(devhelp, $DEVHELP_VERSION)
AM_CONFIG_HEADER(config.h)

AM_SANITY_CHECK
AM_MAINTAINER_MODE

AC_PROG_CC
AC_PROG_CPP
AC_ISC_POSIX
AC_HEADER_STDC
AM_PROG_LIBTOOL

AM_PATH_ORBIT2

GNOME_COMMON_INIT

PKG_CHECK_MODULES(ALL, \
	glib-2.0 >= $GLIB_REQUIRED \
	gtk+-2.0 >= $GTK_REQUIRED \
	libgnome-2.0 >= $GNOME_REQUIRED \
	libgnomeui-2.0 >= $GNOME_UI_REQUIRED \
	gnome-vfs-2.0 >= $GNOME_VFS_REQUIRED \
	libxml-2.0 >= $LIBXML_REQUIRED \
	libglade-2.0 >= $LIBGLADE_REQUIRED \
	libgtkhtml-3.0 >= $LIBGTKHTML3_REQUIRED \
	libIDL-2.0 >= $LIBIDL_REQUIRED \
	ORBit-2.0 >= $ORBIT_REQUIRED \
        bonobo-activation-2.0 >= $BONOBO_ACTIVATION_REQUIRED \
	libbonobo-2.0 >= $LIBBONOBO_REQUIRED \
	libbonoboui-2.0 >= $LIBBONOBOUI_REQUIRED \
	gconf-2.0 >= $GCONF_REQUIRED)
	
ALL_LINGUAS="de es fr it no pl ru sk sv zh_TW"

GETTEXT_PACKAGE=devhelp
AC_SUBST(GETTEXT_PACKAGE)
AC_DEFINE_UNQUOTED(GETTEXT_PACKAGE,"$GETTEXT_PACKAGE")

AM_GLIB_GNU_GETTEXT

AC_PROG_INTLTOOL

AC_PATH_PROG(GLIB_GENMARSHAL, glib-genmarshal)

DEVHELP_MODULES="bonobo-activation-2.0 libbonobo-2.0 libbonoboui-2.0 libgnome-2.0 libgnomeui-2.0 libxml-2.0 libgtkhtml-3.0 gnome-vfs-2.0 libglade-2.0 gconf-2.0"
DEVHELP_CFLAGS="`$PKG_CONFIG --cflags $DEVHELP_MODULES`"
AC_SUBST(DEVHELP_CFLAGS)
DEVHELP_LIBS="`$PKG_CONFIG --libs $DEVHELP_MODULES`"
AC_SUBST(DEVHELP_LIBS)
DEVHELP_IDL_INCLUDES="`$PKG_CONFIG --variable=idldir $DEVHELP_MODULES | sed -e 's/^/ /' -e 's/ \+$//' -e 's/ \+/ -I /g' -e 's/^ \+//'`"
AC_SUBST(DEVHELP_IDL_INCLUDES)

LIBDEVHELP_MODULES="libbonoboui-2.0"
LIBDEVHELP_CFLAGS="`$PKG_CONFIG --cflags $LIBDEVHELP_MODULES`"
AC_SUBST(LIBDEVHELP_CFLAGS)
LIBDEVHELP_LIBS="`$PKG_CONFIG --libs $LIBDEVHELP_MODULES`"
AC_SUBST(LIBDEVHELP_LIBS)

AC_OUTPUT([
Makefile
devhelp.spec
po/Makefile.in
src/Makefile
ui/Makefile
idl/Makefile
])
